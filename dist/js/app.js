!function(){"use strict";angular.module("wistia",["wistia.core","wistia.home","upload"])}(),function(){"use strict";angular.module("wistia.core",[])}(),function(){"use strict";angular.module("wistia.home",[])}(),function(){"use strict";angular.module("upload",[])}(),function(){"use strict";function e(e){e.debugInfoEnabled(!1),e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}angular.module("wistia.core").config(e),e.$inject=["$compileProvider"]}(),function(){"use strict";var e={api_key:"627596ae881b32ab30ab2120b2ac5e4dddd5bc560878c6f63414cd3b1e265848",api_url:"https://upload.wistia.com",embed_url:"https://fast.wistia.net/embed/iframe/",messages:{multi_upload_err:"You can't upload multiple videos at once.",common_err:"An error has occurred. Try again later.",partial_upload_success:" was successfully uploaded.",MIME_err:"Invalid file format."},validMIME:["video/quicktime","video/mpeg","application/x-troff-msvideo","video/avi","video/msvideo","video/x-msvideo","video/x-flv","video/x-f4v","video/mp4","video/x-m4v","video/x-ms-asf","video/x-ms-wmv","video/dvd","video/3gpp","video/x-matroska","video/divx","video/x-xvid","video/webm"]};angular.module("wistia.core").constant("COMMON",e)}(),function(){"use strict";function e(e){this.isValidType=function(i){return e.validMIME.indexOf(i)>-1}}angular.module("wistia.core").service("Util",e),e.$inject=["COMMON"]}(),function(){"use strict";function e(e){var i=this;i.state={message:{text:"",cssClass:""},video:{isUploading:!1,isUploaded:!1,value:0,url:"",height:0,width:0}},i.setState=function(a){i.state=a,e.$apply()}}angular.module("wistia.home").controller("HomeController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,i,a,s,t){var o,d=function(e,i){return{text:e||"",cssClass:i||""}},l=this,n=angular.element(a[0].querySelector("#fileupload")),r={dataType:"json",dropzone:angular.element(a[0].querySelector(".upload__dropzone")),maxNumberOfFiles:1,url:s.api_url,formData:{api_password:s.api_key},add:function(e,i){return t.isValidType(i.files[0].type)?i.originalFiles.length>1?(o.message=d(s.messages.multi_upload_err,"message--danger"),void l.onUpdate(o)):(o.video.isUploading=!0,o.message=d(),l.onUpdate(o),void i.submit()):(o.message=d(s.messages.MIME_err,"message--danger"),void l.onUpdate(o))},progressall:function(e,i){o.video.value=parseInt(i.loaded/i.total*100,10),l.onUpdate(o)},done:function(e,a){a.result&&a.result.hashed_id&&(o.video.isUploading=!1,o.video.isUploaded=!0,o.video.url=i.trustAsResourceUrl(s.embed_url+a.result.hashed_id),o.video.width=a.result.thumbnail.width,o.video.height=a.result.thumbnail.height,o.message=d(a.result.name+s.messages.partial_upload_success,"message--success"),l.onUpdate(o))},fail:function(e,i){o.video.isUploading=!1,o.video.isUploaded=!1,o.message=d(s.messages.common_err,"message--danger"),l.onUpdate(o)}};l.$onInit=function(){o=l.state,n.fileupload(r)}}angular.module("upload").component("wistiaUpload",{templateUrl:"src/app/templates/components/wistiaUpload.tpl.html",controller:e,controllerAs:"wistia",bindings:{state:"=",onUpdate:"&"}}),e.$inject=["$scope","$sce","$element","COMMON","Util"]}();